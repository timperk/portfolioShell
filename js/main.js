!function(e){function a(e,a){l++,c=l/d,TweenLite.to(g,.7,{progress:c,ease:Linear.easeNone})}function o(){c=Math.round(100*g.progress()),e(".txt-perc").text(c+"%")}function t(){var a=new TimelineMax;return a.to(e(".progress"),.3,{y:100,autoAlpha:0,ease:Back.easeIn}).to(e(".txt-perc"),.3,{y:100,autoAlpha:0,ease:Back.easeIn},.1).set(e("body"),{className:"-=is-loading"}).set(e("#intro"),{className:"+=is-loaded"}).to(e("#preloader"),.7,{yPercent:100,ease:Power4.easeInOut}).set(e("#preloader"),{className:"+=is-hidden"}).from(e("#intro .title"),1,{autoAlpha:0,ease:Power1.easeOut},"-=0.2").from(e(".scroll-hint"),.3,{y:-20,autoAlpha:0,ease:Power1.easeOut},"-=0.1"),a}var r=new ScrollMagic.Controller,n=["#slide01","#slide02","#slide03","#slide04","#slide05","#slide06","#slide07","#slide08","#slide09","#slide10"],i=["#slide01 header","#slide02 header","#slide03 header","#slide04 header","#slide05 header","#slide06 header","#slide07 header","#slide08 header","#slide09 header","#slide10 header"],s=["#cb01","#cb02","#cb03"],l=0,d=e(".bcg").length,c=0;e(".bcg").imagesLoaded({background:!0}).progress(function(e,o){a()});var g=new TimelineMax({paused:!0,onUpdate:o,onComplete:t});if(g.to(e(".progress span"),1,{width:100,ease:Linear.easeNone}),!Modernizr.touch){i.forEach(function(e,a){var o=a+1;new ScrollMagic.Scene({triggerElement:e,offset:-50}).setClassToggle("#slide0"+o,"is-active").addTo(r)}),s.forEach(function(a,o){var t=e(a).attr("id");new ScrollMagic.Scene({triggerElement:a,triggerHook:.75}).setClassToggle("#"+t,"is-active").on("enter",function(a){e("nav").attr("class","is-light")}).addTo(r)}),n.forEach(function(a,o){new ScrollMagic.Scene({triggerElement:a}).on("enter",function(a){e("nav").removeAttr("class")}).addTo(r)}),n.forEach(function(a,o){var t=e(a).find(".bcg"),n=new TimelineMax;n.from(t,1,{y:"-40%",autoAlpha:.35,ease:Power0.easeNone});new ScrollMagic.Scene({triggerElement:a,triggerHook:1,duration:"100%"}).setTween(n).addTo(r)});var u=(new TimelineMax({paused:!0,onUpdate:o,onComplete:t}),new ScrollMagic.Scene({triggerElement:"#slide02",triggerHook:1,duration:"100%"}).setTween(TweenMax.to(e("#slide01"),.2,{scale:.85,autoAlpha:.35,ease:Power1.easeOut},"-=0.2")).on("enter",function(a){e("#slide01 iframe").attr("src","https://player.vimeo.com/video/272634066?autoplay=1&loop=1&autopause=0&background=1"),e("nav").attr("class","is-light")}).addTo(r),new ScrollMagic.Scene({triggerElement:"#slide03",triggerHook:1,duration:"100%"}).setTween(TweenMax.to(e("#slide02"),.2,{scale:.85,autoAlpha:.35,ease:Power1.easeOut},"-=0.2")).addTo(r),new ScrollMagic.Scene({triggerElement:"#slide04",triggerHook:1,duration:"100%"}).setTween(TweenMax.to(e("#slide03"),.2,{scale:.85,autoAlpha:.35,ease:Power1.easeOut},"-=0.2")).addTo(r),new ScrollMagic.Scene({triggerElement:"#slide05",triggerHook:1,duration:"100%"}).setTween(TweenMax.to(e("#slide04"),.2,{scale:.85,autoAlpha:.35,ease:Power1.easeOut},"-=0.2")).addTo(r),new ScrollMagic.Scene({triggerElement:"#slide06",triggerHook:1,duration:"100%"}).setTween(TweenMax.to(e("#slide05"),.2,{scale:.85,autoAlpha:.35,ease:Power1.easeOut},"-=0.2")).addTo(r),new ScrollMagic.Scene({triggerElement:"#slide07",triggerHook:1,duration:"100%"}).setTween(TweenMax.to(e("#slide06"),.2,{scale:.85,autoAlpha:.35,ease:Power1.easeOut},"-=0.2")).addTo(r),new ScrollMagic.Scene({triggerElement:"#slide07",triggerHook:1,duration:"100%"}).setTween(TweenMax.from(e("#slide07"),.2,{opacity:.4,ease:Power1.easeOut},"-=0.1")).addTo(r),new ScrollMagic.Scene({triggerElement:"#slide08",triggerHook:1,duration:"100%"}).setTween(TweenMax.from(e("#slide08"),.2,{opacity:.4,ease:Power1.easeOut},"-=0.1")).addTo(r),new ScrollMagic.Scene({triggerElement:"#slide09",triggerHook:1,duration:"100%"}).setTween(TweenMax.from(e("#slide09"),.2,{opacity:.4,ease:Power1.easeOut},"-=0.1")).addTo(r),new ScrollMagic.Scene({triggerElement:"#slide10",triggerHook:1,duration:"100%"}).setTween(TweenMax.from(e("#slide10"),.2,{opacity:.4,ease:Power1.easeOut},"-=0.1")).addTo(r),new TimelineMax);u.to(e("#intro header, .scroll-hint"),.2,{autoAlpha:0,ease:Power1.easeNone}).to(e("#intro"),.2,{scale:.7,ease:Power1.easeOut},"-=0.1");new ScrollMagic.Scene({triggerElement:"#intro",triggerHook:0,duration:"100%"}).setTween(u).addTo(r);r.scrollTo(function(e){TweenMax.to(window,1,{scrollTo:{y:e},ease:Power0.easeInOut})}),e(document).on("click","a[href^='#']",function(a){var o=e(this).attr("href");e(o).length>0&&(a.preventDefault(),r.scrollTo(o),window.history&&window.history.pushState&&history.pushState("",document.title,o))})}}(jQuery);